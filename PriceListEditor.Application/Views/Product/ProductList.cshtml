@model ProductsListViewModel

<div id="categories" class="col-1">
    <vc:category-filter products-list-view-model="@Model" />
</div>
<div class="col-11">
    <h4 class="m-1 pb-2"> Cписок продуктов </h4>
    @foreach (Product p in Model?.Products ?? Enumerable.Empty<Product>())
    {
        <partial name="ProductSummary" model="p" />
    }
    @if (ViewBag.ProductCount > 0)
    {
        <vc:page-size-selector list-view-model="@Model"/>
        <div page-model="@Model?.PageViewModel" page-action="ProductList" page-class-enabled="true" page-class="btn" page-class-normal="btn-outline-dark"
             page-class-selected="btn-primary" page-class-arrow="btn-secondary" page-url-category="@Model?.CurrentCategory!" page-url-pageSize="@Model?.PageViewModel.PageSize ?? 1" class="btn-group pull-right m-1">
        </div>
    }
</div>
<script>
    document.onload = start();
    function start()
    {
        var productCount = '@ViewBag.ProductCount';
        if(productCount == 0)
        {
            var url = new Url(window.location.href);
            alert(url.protocol + "//" + url.host+"/@Model.PageViewModel.Pseudonym/Page1/Size/@Model.PageViewModel.PageSize");
            // window.location.href = window.location.href ;
        }
        alert("product count: @ViewBag.ProductCount\nselected page: @ViewBag.SelectedPage");
    }
</script>